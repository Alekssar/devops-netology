#DZ 3_7
1.

win 

C:\Users\Alex>ipconfig /all

Настройка протокола IP для Windows

   Имя компьютера  . . . . . . . . . : Alex
   Основной DNS-суффикс  . . . . . . :
   Тип узла. . . . . . . . . . . . . : Гибридный
   IP-маршрутизация включена . . . . : Нет
   WINS-прокси включен . . . . . . . : Нет

Неизвестный адаптер ProtonVPN TUN:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :
   Описание. . . . . . . . . . . . . : ProtonVPN Tunnel
   Физический адрес. . . . . . . . . :
   DHCP включен. . . . . . . . . . . : Нет
   Автонастройка включена. . . . . . : Да

Адаптер Ethernet Ethernet:

   DNS-суффикс подключения . . . . . :
   Описание. . . . . . . . . . . . . : Intel(R) Ethernet Connection (2) I219-V
   Физический адрес. . . . . . . . . : 1C-1B-0D-89-7B-FE
   DHCP включен. . . . . . . . . . . : Нет
   Автонастройка включена. . . . . . : Да
   IPv4-адрес. . . . . . . . . . . . : 192.168.155.133(Основной)
   Маска подсети . . . . . . . . . . : 255.255.255.0
   Основной шлюз. . . . . . . . . : 192.168.155.254
   DNS-серверы. . . . . . . . . . . : 192.168.155.254
                                       8.8.8.8
   NetBios через TCP/IP. . . . . . . . : Включен

Адаптер Ethernet VirtualBox Host-Only Network:

   DNS-суффикс подключения . . . . . :
   Описание. . . . . . . . . . . . . : VirtualBox Host-Only Ethernet Adapter
   Физический адрес. . . . . . . . . : 0A-00-27-00-00-07
   DHCP включен. . . . . . . . . . . : Нет
   Автонастройка включена. . . . . . : Да
   Локальный IPv6-адрес канала . . . : fe80::4bd:fd2d:303e:b900%7(Основной)
   IPv4-адрес. . . . . . . . . . . . : 192.168.56.1(Основной)
   Маска подсети . . . . . . . . . . : 255.255.255.0
   Основной шлюз. . . . . . . . . :
   IAID DHCPv6 . . . . . . . . . . . : 470417447
   DUID клиента DHCPv6 . . . . . . . : 00-01-00-01-28-01-EE-98-1C-1B-0D-89-7B-FE
   DNS-серверы. . . . . . . . . . . : fec0:0:0:ffff::1%1
                                       fec0:0:0:ffff::2%1
                                       fec0:0:0:ffff::3%1
   NetBios через TCP/IP. . . . . . . . : Включен

Неизвестный адаптер Подключение по локальной сети:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :
   Описание. . . . . . . . . . . . . : TAP-ProtonVPN Windows Adapter V9
   Физический адрес. . . . . . . . . : 00-FF-FD-FA-44-47
   DHCP включен. . . . . . . . . . . : Да
   Автонастройка включена. . . . . . : Да

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :
   Описание. . . . . . . . . . . . . : TAP-ProtonVPN Windows Adapter V9
   Физический адрес. . . . . . . . . : 00-FF-FD-FA-44-47
   DHCP включен. . . . . . . . . . . : Да
   Автонастройка включена. . . . . . : Да



linux

vagrant@vagrant:~$ ip addr
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:b1:28:5d brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic eth0
       valid_lft 86320sec preferred_lft 86320sec
    inet6 fe80::a00:27ff:feb1:285d/64 scope link
       valid_lft forever preferred_lft forever

2.
LLDP-протокол для обмена информацией между соседними устройствами, позволяет определить к какому порту коммутатора подключен сервер. 
Команда lldpctl

3.
Vlan - виртуальные сети. 
Для её использования в Ubuntu есть пакет vlan. 
Для определения принадлежности интерфейса к конкретному vlan необходимо внести изменения в /etc/network/interfaces.
Например
auto vlan1400
iface vlan1400 inet static
        address 192.168.1.1
	netmask 255.255.255.0
        vlan_raw_device eth0

4.
Типы агрегации:
balance-rr -Данный режим используется по умолчанию. Balance-rr обеспечивается балансировку нагрузки и отказоустойчивость. В данном режиме сетевые пакеты отправляются “по кругу”, от первого интерфейса к последнему. Если выходят из строя интерфейсы, пакеты отправляются на остальные оставшиеся. Дополнительной настройки коммутатора не требуется при нахождении портов в одном коммутаторе. При разностных коммутаторах требуется дополнительная настройка
active-backup - Один из интерфейсов работает в активном режиме, остальные в ожидающем. При обнаружении проблемы на активном интерфейсе производится переключение на ожидающий интерфейс. Не требуется поддержки от коммутатора.
balance-xor - Передача пакетов распределяется по типу входящего и исходящего трафика по формуле ((MAC src) XOR (MAC dest)) % число интерфейсов. Режим дает балансировку нагрузки и отказоустойчивость. Не требуется дополнительной настройки коммутатора/коммутаторов.
broadcast - роисходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость. Рекомендуется только для использования MULTICAST трафика
802.3ad - динамическое объединение одинаковых портов. В данном режиме можно значительно увеличить пропускную способность входящего так и исходящего трафика. Для данного режима необходима поддержка и настройка коммутатора/коммутаторов.
balance-tlb - Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.
balance-alb - Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.

auto bond0
iface bond0 inet static
    address 192.168.155.1
    netmask 255.255.255.0
    network 192.168.155.2
    gateway 192.168.155.254
    bond-slaves enp0s3 enp0s9
    bond-mode active-backup
    bond-miimon 100
    bond-downdelay 200
    bond-updelay 200

5.
vagrant@vagrant:~$ ipcalc -b 10.10.10.0/29
Address:   10.10.10.0
Netmask:   255.255.255.248 = 29
Wildcard:  0.0.0.7
=>
Network:   10.10.10.0/29
HostMin:   10.10.10.1
HostMax:   10.10.10.6
Broadcast: 10.10.10.7
Hosts/Net: 6

8 адресов (включая адрес подсети и бродкаст), т.е. на хосты остается 6 адресов

vagrant@vagrant:~$ ipcalc -b 10.10.10.0/24
Address:   10.10.10.0
Netmask:   255.255.255.0 = 24
Wildcard:  0.0.0.255
=>
Network:   10.10.10.0/24
HostMin:   10.10.10.1
HostMax:   10.10.10.254
Broadcast: 10.10.10.255
Hosts/Net: 254

в сетке с маской /24 256 адресов - значит можно поделить на 32 подсети /29.
примеры /29 подсетей : 
10.10.10.0/29 
10.10.10.8/29 
10.10.10.16/29 
10.10.10.24/29 и т.д. до 10.10.10.248/29 

6.
возьмем свободную частную подсеть 100.64.0.0
в калькуляторе будем использовать -s 
 -s --split n1 n2 n3
 Split into networks of size n1, n2, n3.

vagrant@vagrant:~$ ipcalc 100.64.0.0/10 -s 50
Address:   100.64.0.0           01100100.01 000000.00000000.00000000
Netmask:   255.192.0.0 = 10     11111111.11 000000.00000000.00000000
Wildcard:  0.63.255.255         00000000.00 111111.11111111.11111111
=>
Network:   100.64.0.0/10        01100100.01 000000.00000000.00000000
HostMin:   100.64.0.1           01100100.01 000000.00000000.00000001
HostMax:   100.127.255.254      01100100.01 111111.11111111.11111110
Broadcast: 100.127.255.255      01100100.01 111111.11111111.11111111
Hosts/Net: 4194302               Class A

1. Requested size: 50 hosts
Netmask:   255.255.255.192 = 26 11111111.11111111.11111111.11 000000
Network:   100.64.0.0/26        01100100.01000000.00000000.00 000000
HostMin:   100.64.0.1           01100100.01000000.00000000.00 000001
HostMax:   100.64.0.62          01100100.01000000.00000000.00 111110
Broadcast: 100.64.0.63          01100100.01000000.00000000.00 111111
Hosts/Net: 62                    Class A

Needed size:  64 addresses.
Used network: 100.64.0.0/26
Unused:
100.64.0.64/26
100.64.0.128/25
100.64.1.0/24
100.64.2.0/23
100.64.4.0/22
100.64.8.0/21
100.64.16.0/20
100.64.32.0/19
100.64.64.0/18
100.64.128.0/17
100.65.0.0/16
100.66.0.0/15
100.68.0.0/14
100.72.0.0/13
100.80.0.0/12
100.96.0.0/11

надо брать подсети /26, в которой по 64 хоста 

7.
для win 
C:\Users\Alex>arp -a

Интерфейс: 192.168.155.133 --- 0x6
  адрес в Интернете      Физический адрес      Тип
  192.168.155.9         1c-1b-0d-29-79-a8     динамический
  192.168.155.10        6c-f0-49-76-18-1f     динамический
  192.168.155.54        00-e0-4c-2a-27-83     динамический
.....

arp -a - просмотр
для очистки кэша netsh interface IP delete arpcache (в ком. строке запущеной от админа)
arp -d <ip-address>  - удаление конкретного IP

linux
утилита arp (в пакете net-tools)
arp  - просмотр
arp -d x.x.x.x  - удаление конкретного IP
ip neigh flush all - чистка кэша
